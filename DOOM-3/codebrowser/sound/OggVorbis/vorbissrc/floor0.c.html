<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>floor0.c source code [codebrowser/sound/OggVorbis/vorbissrc/floor0.c] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'codebrowser/sound/OggVorbis/vorbissrc/floor0.c'; var root_path = '../../../..'; var data_path = '../../../../../data';</script>
<script src='../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>codebrowser</a>/<a href='../..'>sound</a>/<a href='..'>OggVorbis</a>/<a href='./'>vorbissrc</a>/<a href='floor0.c.html'>floor0.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/********************************************************************</i></td></tr>
<tr><th id="2">2</th><td><i> *                                                                  *</i></td></tr>
<tr><th id="3">3</th><td><i> * THIS FILE IS PART OF THE OggVorbis SOFTWARE CODEC SOURCE CODE.   *</i></td></tr>
<tr><th id="4">4</th><td><i> * USE, DISTRIBUTION AND REPRODUCTION OF THIS LIBRARY SOURCE IS     *</i></td></tr>
<tr><th id="5">5</th><td><i> * GOVERNED BY A BSD-STYLE SOURCE LICENSE INCLUDED WITH THIS SOURCE *</i></td></tr>
<tr><th id="6">6</th><td><i> * IN 'COPYING'. PLEASE READ THESE TERMS BEFORE DISTRIBUTING.       *</i></td></tr>
<tr><th id="7">7</th><td><i> *                                                                  *</i></td></tr>
<tr><th id="8">8</th><td><i> * THE OggVorbis SOURCE CODE IS (C) COPYRIGHT 1994-2002             *</i></td></tr>
<tr><th id="9">9</th><td><i> * by the XIPHOPHORUS Company <a href="http://www.xiph.org/">http://www.xiph.org/</a>                  *</i></td></tr>
<tr><th id="10">10</th><td><i> *                                                                  *</i></td></tr>
<tr><th id="11">11</th><td><i> ********************************************************************</i></td></tr>
<tr><th id="12">12</th><td><i></i></td></tr>
<tr><th id="13">13</th><td><i> function: floor backend 0 implementation</i></td></tr>
<tr><th id="14">14</th><td><i> last mod: $Id: floor0.c,v 1.55 2003/09/05 23:17:49 giles Exp $</i></td></tr>
<tr><th id="15">15</th><td><i></i></td></tr>
<tr><th id="16">16</th><td><i> ********************************************************************/</i></td></tr>
<tr><th id="17">17</th><td></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="../../../../include/stdlib.h.html">&lt;stdlib.h&gt;</a></u></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="../../../../include/string.h.html">&lt;string.h&gt;</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="../../../../include/math.h.html">&lt;math.h&gt;</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="../ogg/ogg.h.html">"../ogg/ogg.h"</a></u></td></tr>
<tr><th id="22">22</th><td><u>#include <a href="../vorbis/codec.h.html">"../vorbis/codec.h"</a></u></td></tr>
<tr><th id="23">23</th><td><u>#include <a href="codec_internal.h.html">"codec_internal.h"</a></u></td></tr>
<tr><th id="24">24</th><td><u>#include <a href="registry.h.html">"registry.h"</a></u></td></tr>
<tr><th id="25">25</th><td><u>#include <a href="lpc.h.html">"lpc.h"</a></u></td></tr>
<tr><th id="26">26</th><td><u>#include <a href="lsp.h.html">"lsp.h"</a></u></td></tr>
<tr><th id="27">27</th><td><u>#include <a href="codebook.h.html">"codebook.h"</a></u></td></tr>
<tr><th id="28">28</th><td><u>#include <a href="scales.h.html">"scales.h"</a></u></td></tr>
<tr><th id="29">29</th><td><u>#include <a href="misc.h.html">"misc.h"</a></u></td></tr>
<tr><th id="30">30</th><td><u>#include <a href="os.h.html">"os.h"</a></u></td></tr>
<tr><th id="31">31</th><td></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="misc.h.html">"misc.h"</a></u></td></tr>
<tr><th id="33">33</th><td><u>#include <a href="../../../../include/stdio.h.html">&lt;stdio.h&gt;</a></u></td></tr>
<tr><th id="34">34</th><td></td></tr>
<tr><th id="35">35</th><td><b>typedef</b> <b>struct</b> {</td></tr>
<tr><th id="36">36</th><td>  <em>int</em> <dfn class="tu decl" id="(anonymous)::ln" title='(anonymous struct)::ln' data-type='int' data-ref="(anonymous)::ln">ln</dfn>;</td></tr>
<tr><th id="37">37</th><td>  <em>int</em>  <dfn class="tu decl" id="(anonymous)::m" title='(anonymous struct)::m' data-type='int' data-ref="(anonymous)::m">m</dfn>;</td></tr>
<tr><th id="38">38</th><td>  <em>int</em> **<dfn class="tu decl" id="(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-type='int **' data-ref="(anonymous)::linearmap">linearmap</dfn>;</td></tr>
<tr><th id="39">39</th><td>  <em>int</em>  <dfn class="tu decl" id="(anonymous)::n" title='(anonymous struct)::n' data-type='int [2]' data-ref="(anonymous)::n">n</dfn>[<var>2</var>];</td></tr>
<tr><th id="40">40</th><td></td></tr>
<tr><th id="41">41</th><td>  <a class="typedef" href="backends.h.html#vorbis_info_floor0" title='vorbis_info_floor0' data-type='struct vorbis_info_floor0' data-ref="vorbis_info_floor0">vorbis_info_floor0</a> *<dfn class="tu decl" id="(anonymous)::vi" title='(anonymous struct)::vi' data-type='vorbis_info_floor0 *' data-ref="(anonymous)::vi">vi</dfn>;</td></tr>
<tr><th id="42">42</th><td></td></tr>
<tr><th id="43">43</th><td>  <em>long</em> <dfn class="tu decl" id="(anonymous)::bits" title='(anonymous struct)::bits' data-type='long' data-ref="(anonymous)::bits">bits</dfn>;</td></tr>
<tr><th id="44">44</th><td>  <em>long</em> <dfn class="tu decl" id="(anonymous)::frames" title='(anonymous struct)::frames' data-type='long' data-ref="(anonymous)::frames">frames</dfn>;</td></tr>
<tr><th id="45">45</th><td>} <dfn class="typedef" id="vorbis_look_floor0" title='vorbis_look_floor0' data-type='struct vorbis_look_floor0' data-ref="vorbis_look_floor0">vorbis_look_floor0</dfn>;</td></tr>
<tr><th id="46">46</th><td></td></tr>
<tr><th id="47">47</th><td></td></tr>
<tr><th id="48">48</th><td><i  data-doc="floor0_free_info">/***********************************************/</i></td></tr>
<tr><th id="49">49</th><td></td></tr>
<tr><th id="50">50</th><td><em>static</em> <em>void</em> <dfn class="tu decl def" id="floor0_free_info" title='floor0_free_info' data-type='void floor0_free_info(vorbis_info_floor * i)' data-ref="floor0_free_info">floor0_free_info</dfn>(<a class="typedef" href="codec_internal.h.html#vorbis_info_floor" title='vorbis_info_floor' data-type='void' data-ref="vorbis_info_floor">vorbis_info_floor</a> *<dfn class="local col2 decl" id="12i" title='i' data-type='vorbis_info_floor *' data-ref="12i">i</dfn>){</td></tr>
<tr><th id="51">51</th><td>  <a class="typedef" href="backends.h.html#vorbis_info_floor0" title='vorbis_info_floor0' data-type='struct vorbis_info_floor0' data-ref="vorbis_info_floor0">vorbis_info_floor0</a> *<dfn class="local col3 decl" id="13info" title='info' data-type='vorbis_info_floor0 *' data-ref="13info">info</dfn>=(<a class="typedef" href="backends.h.html#vorbis_info_floor0" title='vorbis_info_floor0' data-type='struct vorbis_info_floor0' data-ref="vorbis_info_floor0">vorbis_info_floor0</a> *)<a class="local col2 ref" href="#12i" title='i' data-ref="12i">i</a>;</td></tr>
<tr><th id="52">52</th><td>  <b>if</b>(<a class="local col3 ref" href="#13info" title='info' data-ref="13info">info</a>){</td></tr>
<tr><th id="53">53</th><td>    <a class="ref" href="../../../../include/string.h.html#memset" title='memset' data-ref="memset">memset</a>(<a class="local col3 ref" href="#13info" title='info' data-ref="13info">info</a>,<var>0</var>,<b>sizeof</b>(*<a class="local col3 ref" href="#13info" title='info' data-ref="13info">info</a>));</td></tr>
<tr><th id="54">54</th><td>    <a class="macro" href="../ogg/os_types.h.html#41" title="_decoder_free" data-ref="_M/_ogg_free">_ogg_free</a>(<a class="local col3 ref" href="#13info" title='info' data-ref="13info">info</a>);</td></tr>
<tr><th id="55">55</th><td>  }</td></tr>
<tr><th id="56">56</th><td>}</td></tr>
<tr><th id="57">57</th><td></td></tr>
<tr><th id="58">58</th><td><em>static</em> <em>void</em> <dfn class="tu decl def" id="floor0_free_look" title='floor0_free_look' data-type='void floor0_free_look(vorbis_look_floor * i)' data-ref="floor0_free_look">floor0_free_look</dfn>(<a class="typedef" href="codec_internal.h.html#vorbis_look_floor" title='vorbis_look_floor' data-type='void' data-ref="vorbis_look_floor">vorbis_look_floor</a> *<dfn class="local col4 decl" id="14i" title='i' data-type='vorbis_look_floor *' data-ref="14i">i</dfn>){</td></tr>
<tr><th id="59">59</th><td>  <a class="typedef" href="#vorbis_look_floor0" title='vorbis_look_floor0' data-type='struct vorbis_look_floor0' data-ref="vorbis_look_floor0">vorbis_look_floor0</a> *<dfn class="local col5 decl" id="15look" title='look' data-type='vorbis_look_floor0 *' data-ref="15look">look</dfn>=(<a class="typedef" href="#vorbis_look_floor0" title='vorbis_look_floor0' data-type='struct vorbis_look_floor0' data-ref="vorbis_look_floor0">vorbis_look_floor0</a> *)<a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>;</td></tr>
<tr><th id="60">60</th><td>  <b>if</b>(<a class="local col5 ref" href="#15look" title='look' data-ref="15look">look</a>){</td></tr>
<tr><th id="61">61</th><td></td></tr>
<tr><th id="62">62</th><td>    <b>if</b>(<a class="local col5 ref" href="#15look" title='look' data-ref="15look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>){</td></tr>
<tr><th id="63">63</th><td></td></tr>
<tr><th id="64">64</th><td>      <b>if</b>(<a class="local col5 ref" href="#15look" title='look' data-ref="15look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>[<var>0</var>])<a class="macro" href="../ogg/os_types.h.html#41" title="_decoder_free" data-ref="_M/_ogg_free">_ogg_free</a>(<a class="local col5 ref" href="#15look" title='look' data-ref="15look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>[<var>0</var>]);</td></tr>
<tr><th id="65">65</th><td>      <b>if</b>(<a class="local col5 ref" href="#15look" title='look' data-ref="15look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>[<var>1</var>])<a class="macro" href="../ogg/os_types.h.html#41" title="_decoder_free" data-ref="_M/_ogg_free">_ogg_free</a>(<a class="local col5 ref" href="#15look" title='look' data-ref="15look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>[<var>1</var>]);</td></tr>
<tr><th id="66">66</th><td></td></tr>
<tr><th id="67">67</th><td>      <a class="macro" href="../ogg/os_types.h.html#41" title="_decoder_free" data-ref="_M/_ogg_free">_ogg_free</a>(<a class="local col5 ref" href="#15look" title='look' data-ref="15look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>);</td></tr>
<tr><th id="68">68</th><td>    }</td></tr>
<tr><th id="69">69</th><td>    <a class="ref" href="../../../../include/string.h.html#memset" title='memset' data-ref="memset">memset</a>(<a class="local col5 ref" href="#15look" title='look' data-ref="15look">look</a>,<var>0</var>,<b>sizeof</b>(*<a class="local col5 ref" href="#15look" title='look' data-ref="15look">look</a>));</td></tr>
<tr><th id="70">70</th><td>    <a class="macro" href="../ogg/os_types.h.html#41" title="_decoder_free" data-ref="_M/_ogg_free">_ogg_free</a>(<a class="local col5 ref" href="#15look" title='look' data-ref="15look">look</a>);</td></tr>
<tr><th id="71">71</th><td>  }</td></tr>
<tr><th id="72">72</th><td>}</td></tr>
<tr><th id="73">73</th><td></td></tr>
<tr><th id="74">74</th><td><em>static</em> <a class="typedef" href="codec_internal.h.html#vorbis_info_floor" title='vorbis_info_floor' data-type='void' data-ref="vorbis_info_floor">vorbis_info_floor</a> *<dfn class="tu decl def" id="floor0_unpack" title='floor0_unpack' data-type='vorbis_info_floor * floor0_unpack(vorbis_info * vi, oggpack_buffer * opb)' data-ref="floor0_unpack">floor0_unpack</dfn> (<a class="typedef" href="../vorbis/codec.h.html#vorbis_info" title='vorbis_info' data-type='struct vorbis_info' data-ref="vorbis_info">vorbis_info</a> *<dfn class="local col6 decl" id="16vi" title='vi' data-type='vorbis_info *' data-ref="16vi">vi</dfn>,<a class="typedef" href="../ogg/ogg.h.html#oggpack_buffer" title='oggpack_buffer' data-type='struct oggpack_buffer' data-ref="oggpack_buffer">oggpack_buffer</a> *<dfn class="local col7 decl" id="17opb" title='opb' data-type='oggpack_buffer *' data-ref="17opb">opb</dfn>){</td></tr>
<tr><th id="75">75</th><td>  <a class="typedef" href="codec_internal.h.html#codec_setup_info" title='codec_setup_info' data-type='struct codec_setup_info' data-ref="codec_setup_info">codec_setup_info</a>     *<dfn class="local col8 decl" id="18ci" title='ci' data-type='codec_setup_info *' data-ref="18ci">ci</dfn>=<a class="local col6 ref" href="#16vi" title='vi' data-ref="16vi">vi</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_info::codec_setup" title='vorbis_info::codec_setup' data-ref="vorbis_info::codec_setup">codec_setup</a>;</td></tr>
<tr><th id="76">76</th><td>  <em>int</em> <dfn class="local col9 decl" id="19j" title='j' data-type='int' data-ref="19j">j</dfn>;</td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td>  <a class="typedef" href="backends.h.html#vorbis_info_floor0" title='vorbis_info_floor0' data-type='struct vorbis_info_floor0' data-ref="vorbis_info_floor0">vorbis_info_floor0</a> *<dfn class="local col0 decl" id="20info" title='info' data-type='vorbis_info_floor0 *' data-ref="20info">info</dfn>=<a class="macro" href="../ogg/os_types.h.html#38" title="_decoder_malloc" data-ref="_M/_ogg_malloc">_ogg_malloc</a>(<b>sizeof</b>(*<a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>));</td></tr>
<tr><th id="79">79</th><td>  <a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::order" title='(anonymous struct)::order' data-ref="(anonymous)::order">order</a>=<a class="ref" href="../ogg/ogg.h.html#oggpack_read" title='oggpack_read' data-ref="oggpack_read">oggpack_read</a>(<a class="local col7 ref" href="#17opb" title='opb' data-ref="17opb">opb</a>,<var>8</var>);</td></tr>
<tr><th id="80">80</th><td>  <a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::rate" title='(anonymous struct)::rate' data-ref="(anonymous)::rate">rate</a>=<a class="ref" href="../ogg/ogg.h.html#oggpack_read" title='oggpack_read' data-ref="oggpack_read">oggpack_read</a>(<a class="local col7 ref" href="#17opb" title='opb' data-ref="17opb">opb</a>,<var>16</var>);</td></tr>
<tr><th id="81">81</th><td>  <a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::barkmap" title='(anonymous struct)::barkmap' data-ref="(anonymous)::barkmap">barkmap</a>=<a class="ref" href="../ogg/ogg.h.html#oggpack_read" title='oggpack_read' data-ref="oggpack_read">oggpack_read</a>(<a class="local col7 ref" href="#17opb" title='opb' data-ref="17opb">opb</a>,<var>16</var>);</td></tr>
<tr><th id="82">82</th><td>  <a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::ampbits" title='(anonymous struct)::ampbits' data-ref="(anonymous)::ampbits">ampbits</a>=<a class="ref" href="../ogg/ogg.h.html#oggpack_read" title='oggpack_read' data-ref="oggpack_read">oggpack_read</a>(<a class="local col7 ref" href="#17opb" title='opb' data-ref="17opb">opb</a>,<var>6</var>);</td></tr>
<tr><th id="83">83</th><td>  <a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::ampdB" title='(anonymous struct)::ampdB' data-ref="(anonymous)::ampdB">ampdB</a>=<a class="ref" href="../ogg/ogg.h.html#oggpack_read" title='oggpack_read' data-ref="oggpack_read">oggpack_read</a>(<a class="local col7 ref" href="#17opb" title='opb' data-ref="17opb">opb</a>,<var>8</var>);</td></tr>
<tr><th id="84">84</th><td>  <a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::numbooks" title='(anonymous struct)::numbooks' data-ref="(anonymous)::numbooks">numbooks</a>=<a class="ref" href="../ogg/ogg.h.html#oggpack_read" title='oggpack_read' data-ref="oggpack_read">oggpack_read</a>(<a class="local col7 ref" href="#17opb" title='opb' data-ref="17opb">opb</a>,<var>4</var>)+<var>1</var>;</td></tr>
<tr><th id="85">85</th><td>  </td></tr>
<tr><th id="86">86</th><td>  <b>if</b>(<a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::order" title='(anonymous struct)::order' data-ref="(anonymous)::order">order</a>&lt;<var>1</var>)<b>goto</b> <a class="lbl" href="#21err_out" data-ref="21err_out">err_out</a>;</td></tr>
<tr><th id="87">87</th><td>  <b>if</b>(<a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::rate" title='(anonymous struct)::rate' data-ref="(anonymous)::rate">rate</a>&lt;<var>1</var>)<b>goto</b> <a class="lbl" href="#21err_out" data-ref="21err_out">err_out</a>;</td></tr>
<tr><th id="88">88</th><td>  <b>if</b>(<a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::barkmap" title='(anonymous struct)::barkmap' data-ref="(anonymous)::barkmap">barkmap</a>&lt;<var>1</var>)<b>goto</b> <a class="lbl" href="#21err_out" data-ref="21err_out">err_out</a>;</td></tr>
<tr><th id="89">89</th><td>  <b>if</b>(<a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::numbooks" title='(anonymous struct)::numbooks' data-ref="(anonymous)::numbooks">numbooks</a>&lt;<var>1</var>)<b>goto</b> <a class="lbl" href="#21err_out" data-ref="21err_out">err_out</a>;</td></tr>
<tr><th id="90">90</th><td>    </td></tr>
<tr><th id="91">91</th><td>  <b>for</b>(<a class="local col9 ref" href="#19j" title='j' data-ref="19j">j</a>=<var>0</var>;<a class="local col9 ref" href="#19j" title='j' data-ref="19j">j</a>&lt;<a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::numbooks" title='(anonymous struct)::numbooks' data-ref="(anonymous)::numbooks">numbooks</a>;<a class="local col9 ref" href="#19j" title='j' data-ref="19j">j</a>++){</td></tr>
<tr><th id="92">92</th><td>    <a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::books" title='(anonymous struct)::books' data-ref="(anonymous)::books">books</a>[<a class="local col9 ref" href="#19j" title='j' data-ref="19j">j</a>]=<a class="ref" href="../ogg/ogg.h.html#oggpack_read" title='oggpack_read' data-ref="oggpack_read">oggpack_read</a>(<a class="local col7 ref" href="#17opb" title='opb' data-ref="17opb">opb</a>,<var>8</var>);</td></tr>
<tr><th id="93">93</th><td>    <b>if</b>(<a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::books" title='(anonymous struct)::books' data-ref="(anonymous)::books">books</a>[<a class="local col9 ref" href="#19j" title='j' data-ref="19j">j</a>]&lt;<var>0</var> || <a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::books" title='(anonymous struct)::books' data-ref="(anonymous)::books">books</a>[<a class="local col9 ref" href="#19j" title='j' data-ref="19j">j</a>]&gt;=<a class="local col8 ref" href="#18ci" title='ci' data-ref="18ci">ci</a>-&gt;<a class="ref" href="codec_internal.h.html#codec_setup_info::books" title='codec_setup_info::books' data-ref="codec_setup_info::books">books</a>)<b>goto</b> <a class="lbl" href="#21err_out" data-ref="21err_out">err_out</a>;</td></tr>
<tr><th id="94">94</th><td>  }</td></tr>
<tr><th id="95">95</th><td>  <b>return</b>(<a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>);</td></tr>
<tr><th id="96">96</th><td></td></tr>
<tr><th id="97">97</th><td> <dfn class="lbl" id="21err_out" data-ref="21err_out">err_out</dfn>:</td></tr>
<tr><th id="98">98</th><td>  <a class="tu ref" href="#floor0_free_info" title='floor0_free_info' data-use='c' data-ref="floor0_free_info">floor0_free_info</a>(<a class="local col0 ref" href="#20info" title='info' data-ref="20info">info</a>);</td></tr>
<tr><th id="99">99</th><td>  <b>return</b>(<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="100">100</th><td>}</td></tr>
<tr><th id="101">101</th><td></td></tr>
<tr><th id="102">102</th><td><i  data-doc="floor0_map_lazy_init">/* initialize Bark scale and normalization lookups.  We could do this</i></td></tr>
<tr><th id="103">103</th><td><i  data-doc="floor0_map_lazy_init">   with static tables, but Vorbis allows a number of possible</i></td></tr>
<tr><th id="104">104</th><td><i  data-doc="floor0_map_lazy_init">   combinations, so it's best to do it computationally.</i></td></tr>
<tr><th id="105">105</th><td><i  data-doc="floor0_map_lazy_init"></i></td></tr>
<tr><th id="106">106</th><td><i  data-doc="floor0_map_lazy_init">   The below is authoritative in terms of defining scale mapping.</i></td></tr>
<tr><th id="107">107</th><td><i  data-doc="floor0_map_lazy_init">   Note that the scale depends on the sampling rate as well as the</i></td></tr>
<tr><th id="108">108</th><td><i  data-doc="floor0_map_lazy_init">   linear block and mapping sizes */</i></td></tr>
<tr><th id="109">109</th><td></td></tr>
<tr><th id="110">110</th><td><em>static</em> <em>void</em> <dfn class="tu decl def" id="floor0_map_lazy_init" title='floor0_map_lazy_init' data-type='void floor0_map_lazy_init(vorbis_block * vb, vorbis_info_floor * infoX, vorbis_look_floor0 * look)' data-ref="floor0_map_lazy_init">floor0_map_lazy_init</dfn>(<a class="typedef" href="../vorbis/codec.h.html#vorbis_block" title='vorbis_block' data-type='struct vorbis_block' data-ref="vorbis_block">vorbis_block</a>      *<dfn class="local col2 decl" id="22vb" title='vb' data-type='vorbis_block *' data-ref="22vb">vb</dfn>,</td></tr>
<tr><th id="111">111</th><td>				 <a class="typedef" href="codec_internal.h.html#vorbis_info_floor" title='vorbis_info_floor' data-type='void' data-ref="vorbis_info_floor">vorbis_info_floor</a> *<dfn class="local col3 decl" id="23infoX" title='infoX' data-type='vorbis_info_floor *' data-ref="23infoX">infoX</dfn>,</td></tr>
<tr><th id="112">112</th><td>				 <a class="typedef" href="#vorbis_look_floor0" title='vorbis_look_floor0' data-type='struct vorbis_look_floor0' data-ref="vorbis_look_floor0">vorbis_look_floor0</a> *<dfn class="local col4 decl" id="24look" title='look' data-type='vorbis_look_floor0 *' data-ref="24look">look</dfn>){</td></tr>
<tr><th id="113">113</th><td>  <b>if</b>(!<a class="local col4 ref" href="#24look" title='look' data-ref="24look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>[<a class="local col2 ref" href="#22vb" title='vb' data-ref="22vb">vb</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_block::W" title='vorbis_block::W' data-ref="vorbis_block::W">W</a>]){</td></tr>
<tr><th id="114">114</th><td>    <a class="typedef" href="../vorbis/codec.h.html#vorbis_dsp_state" title='vorbis_dsp_state' data-type='struct vorbis_dsp_state' data-ref="vorbis_dsp_state">vorbis_dsp_state</a>   *<dfn class="local col5 decl" id="25vd" title='vd' data-type='vorbis_dsp_state *' data-ref="25vd">vd</dfn>=<a class="local col2 ref" href="#22vb" title='vb' data-ref="22vb">vb</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_block::vd" title='vorbis_block::vd' data-ref="vorbis_block::vd">vd</a>;</td></tr>
<tr><th id="115">115</th><td>    <a class="typedef" href="../vorbis/codec.h.html#vorbis_info" title='vorbis_info' data-type='struct vorbis_info' data-ref="vorbis_info">vorbis_info</a>        *<dfn class="local col6 decl" id="26vi" title='vi' data-type='vorbis_info *' data-ref="26vi">vi</dfn>=<a class="local col5 ref" href="#25vd" title='vd' data-ref="25vd">vd</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_dsp_state::vi" title='vorbis_dsp_state::vi' data-ref="vorbis_dsp_state::vi">vi</a>;</td></tr>
<tr><th id="116">116</th><td>    <a class="typedef" href="codec_internal.h.html#codec_setup_info" title='codec_setup_info' data-type='struct codec_setup_info' data-ref="codec_setup_info">codec_setup_info</a>   *<dfn class="local col7 decl" id="27ci" title='ci' data-type='codec_setup_info *' data-ref="27ci">ci</dfn>=<a class="local col6 ref" href="#26vi" title='vi' data-ref="26vi">vi</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_info::codec_setup" title='vorbis_info::codec_setup' data-ref="vorbis_info::codec_setup">codec_setup</a>;</td></tr>
<tr><th id="117">117</th><td>    <a class="typedef" href="backends.h.html#vorbis_info_floor0" title='vorbis_info_floor0' data-type='struct vorbis_info_floor0' data-ref="vorbis_info_floor0">vorbis_info_floor0</a> *<dfn class="local col8 decl" id="28info" title='info' data-type='vorbis_info_floor0 *' data-ref="28info">info</dfn>=(<a class="typedef" href="backends.h.html#vorbis_info_floor0" title='vorbis_info_floor0' data-type='struct vorbis_info_floor0' data-ref="vorbis_info_floor0">vorbis_info_floor0</a> *)<a class="local col3 ref" href="#23infoX" title='infoX' data-ref="23infoX">infoX</a>;</td></tr>
<tr><th id="118">118</th><td>    <em>int</em> <dfn class="local col9 decl" id="29W" title='W' data-type='int' data-ref="29W">W</dfn>=<a class="local col2 ref" href="#22vb" title='vb' data-ref="22vb">vb</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_block::W" title='vorbis_block::W' data-ref="vorbis_block::W">W</a>;</td></tr>
<tr><th id="119">119</th><td>    <em>int</em> <dfn class="local col0 decl" id="30n" title='n' data-type='int' data-ref="30n">n</dfn>=<a class="local col7 ref" href="#27ci" title='ci' data-ref="27ci">ci</a>-&gt;<a class="ref" href="codec_internal.h.html#codec_setup_info::blocksizes" title='codec_setup_info::blocksizes' data-ref="codec_setup_info::blocksizes">blocksizes</a>[<a class="local col9 ref" href="#29W" title='W' data-ref="29W">W</a>]/<var>2</var>,<dfn class="local col1 decl" id="31j" title='j' data-type='int' data-ref="31j">j</dfn>;</td></tr>
<tr><th id="120">120</th><td></td></tr>
<tr><th id="121">121</th><td>    <i>/* we choose a scaling constant so that:</i></td></tr>
<tr><th id="122">122</th><td><i>       floor(bark(rate/2-1)*C)=mapped-1</i></td></tr>
<tr><th id="123">123</th><td><i>     floor(bark(rate/2)*C)=mapped */</i></td></tr>
<tr><th id="124">124</th><td>    <em>float</em> <dfn class="local col2 decl" id="32scale" title='scale' data-type='float' data-ref="32scale">scale</dfn>=<a class="local col4 ref" href="#24look" title='look' data-ref="24look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::ln" title='(anonymous struct)::ln' data-use='r' data-ref="(anonymous)::ln">ln</a>/<a class="macro" href="scales.h.html#76" title="(13.1f*atan(.00074f*(info-&gt;rate/2.f))+2.24f*atan((info-&gt;rate/2.f)*(info-&gt;rate/2.f)*1.85e-8f)+1e-4f*(info-&gt;rate/2.f))" data-ref="_M/toBARK">toBARK</a>(<a class="local col8 ref" href="#28info" title='info' data-ref="28info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::rate" title='(anonymous struct)::rate' data-ref="(anonymous)::rate">rate</a>/<var>2.f</var>);</td></tr>
<tr><th id="125">125</th><td>    </td></tr>
<tr><th id="126">126</th><td>    <i>/* the mapping from a linear scale to a smaller bark scale is</i></td></tr>
<tr><th id="127">127</th><td><i>       straightforward.  We do *not* make sure that the linear mapping</i></td></tr>
<tr><th id="128">128</th><td><i>       does not skip bark-scale bins; the decoder simply skips them and</i></td></tr>
<tr><th id="129">129</th><td><i>       the encoder may do what it wishes in filling them.  They're</i></td></tr>
<tr><th id="130">130</th><td><i>       necessary in some mapping combinations to keep the scale spacing</i></td></tr>
<tr><th id="131">131</th><td><i>       accurate */</i></td></tr>
<tr><th id="132">132</th><td>    <a class="local col4 ref" href="#24look" title='look' data-ref="24look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>[<a class="local col9 ref" href="#29W" title='W' data-ref="29W">W</a>]=<a class="macro" href="../ogg/os_types.h.html#38" title="_decoder_malloc" data-ref="_M/_ogg_malloc">_ogg_malloc</a>((<a class="local col0 ref" href="#30n" title='n' data-ref="30n">n</a>+<var>1</var>)*<b>sizeof</b>(**<a class="local col4 ref" href="#24look" title='look' data-ref="24look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>));</td></tr>
<tr><th id="133">133</th><td>    <b>for</b>(<a class="local col1 ref" href="#31j" title='j' data-ref="31j">j</a>=<var>0</var>;<a class="local col1 ref" href="#31j" title='j' data-ref="31j">j</a>&lt;<a class="local col0 ref" href="#30n" title='n' data-ref="30n">n</a>;<a class="local col1 ref" href="#31j" title='j' data-ref="31j">j</a>++){</td></tr>
<tr><th id="134">134</th><td>      <em>int</em> <dfn class="local col3 decl" id="33val" title='val' data-type='int' data-ref="33val">val</dfn>=<a class="ref" href="../../../../include/x86_64-linux-gnu/bits/mathcalls.h.html#184" title='floor' data-ref="floor">floor</a>( <a class="macro" href="scales.h.html#76" title="(13.1f*atan(.00074f*((info-&gt;rate/2.f)/n*j))+2.24f*atan(((info-&gt;rate/2.f)/n*j)*((info-&gt;rate/2.f)/n*j)*1.85e-8f)+1e-4f*((info-&gt;rate/2.f)/n*j))" data-ref="_M/toBARK">toBARK</a>((<a class="local col8 ref" href="#28info" title='info' data-ref="28info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::rate" title='(anonymous struct)::rate' data-ref="(anonymous)::rate">rate</a>/<var>2.f</var>)/<a class="local col0 ref" href="#30n" title='n' data-ref="30n">n</a>*<a class="local col1 ref" href="#31j" title='j' data-ref="31j">j</a>) </td></tr>
<tr><th id="135">135</th><td>		     *<a class="local col2 ref" href="#32scale" title='scale' data-ref="32scale">scale</a>); <i>/* bark numbers represent band edges */</i></td></tr>
<tr><th id="136">136</th><td>      <b>if</b>(<a class="local col3 ref" href="#33val" title='val' data-ref="33val">val</a>&gt;=<a class="local col4 ref" href="#24look" title='look' data-ref="24look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::ln" title='(anonymous struct)::ln' data-use='r' data-ref="(anonymous)::ln">ln</a>)<a class="local col3 ref" href="#33val" title='val' data-ref="33val">val</a>=<a class="local col4 ref" href="#24look" title='look' data-ref="24look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::ln" title='(anonymous struct)::ln' data-use='r' data-ref="(anonymous)::ln">ln</a>-<var>1</var>; <i>/* guard against the approximation */</i></td></tr>
<tr><th id="137">137</th><td>      <a class="local col4 ref" href="#24look" title='look' data-ref="24look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>[<a class="local col9 ref" href="#29W" title='W' data-ref="29W">W</a>][<a class="local col1 ref" href="#31j" title='j' data-ref="31j">j</a>]=<a class="local col3 ref" href="#33val" title='val' data-ref="33val">val</a>;</td></tr>
<tr><th id="138">138</th><td>    }</td></tr>
<tr><th id="139">139</th><td>    <a class="local col4 ref" href="#24look" title='look' data-ref="24look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>[<a class="local col9 ref" href="#29W" title='W' data-ref="29W">W</a>][<a class="local col1 ref" href="#31j" title='j' data-ref="31j">j</a>]=-<var>1</var>;</td></tr>
<tr><th id="140">140</th><td>    <a class="local col4 ref" href="#24look" title='look' data-ref="24look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::n" title='(anonymous struct)::n' data-use='w' data-ref="(anonymous)::n">n</a>[<a class="local col9 ref" href="#29W" title='W' data-ref="29W">W</a>]=<a class="local col0 ref" href="#30n" title='n' data-ref="30n">n</a>;</td></tr>
<tr><th id="141">141</th><td>  }</td></tr>
<tr><th id="142">142</th><td>}</td></tr>
<tr><th id="143">143</th><td></td></tr>
<tr><th id="144">144</th><td><em>static</em> <a class="typedef" href="codec_internal.h.html#vorbis_look_floor" title='vorbis_look_floor' data-type='void' data-ref="vorbis_look_floor">vorbis_look_floor</a> *<dfn class="tu decl def" id="floor0_look" title='floor0_look' data-type='vorbis_look_floor * floor0_look(vorbis_dsp_state * vd, vorbis_info_floor * i)' data-ref="floor0_look">floor0_look</dfn>(<a class="typedef" href="../vorbis/codec.h.html#vorbis_dsp_state" title='vorbis_dsp_state' data-type='struct vorbis_dsp_state' data-ref="vorbis_dsp_state">vorbis_dsp_state</a> *<dfn class="local col4 decl" id="34vd" title='vd' data-type='vorbis_dsp_state *' data-ref="34vd">vd</dfn>,</td></tr>
<tr><th id="145">145</th><td>				      <a class="typedef" href="codec_internal.h.html#vorbis_info_floor" title='vorbis_info_floor' data-type='void' data-ref="vorbis_info_floor">vorbis_info_floor</a> *<dfn class="local col5 decl" id="35i" title='i' data-type='vorbis_info_floor *' data-ref="35i">i</dfn>){</td></tr>
<tr><th id="146">146</th><td>  <a class="typedef" href="backends.h.html#vorbis_info_floor0" title='vorbis_info_floor0' data-type='struct vorbis_info_floor0' data-ref="vorbis_info_floor0">vorbis_info_floor0</a> *<dfn class="local col6 decl" id="36info" title='info' data-type='vorbis_info_floor0 *' data-ref="36info">info</dfn>=(<a class="typedef" href="backends.h.html#vorbis_info_floor0" title='vorbis_info_floor0' data-type='struct vorbis_info_floor0' data-ref="vorbis_info_floor0">vorbis_info_floor0</a> *)<a class="local col5 ref" href="#35i" title='i' data-ref="35i">i</a>;</td></tr>
<tr><th id="147">147</th><td>  <a class="typedef" href="#vorbis_look_floor0" title='vorbis_look_floor0' data-type='struct vorbis_look_floor0' data-ref="vorbis_look_floor0">vorbis_look_floor0</a> *<dfn class="local col7 decl" id="37look" title='look' data-type='vorbis_look_floor0 *' data-ref="37look">look</dfn>=<a class="macro" href="../ogg/os_types.h.html#39" title="_decoder_calloc" data-ref="_M/_ogg_calloc">_ogg_calloc</a>(<var>1</var>,<b>sizeof</b>(*<a class="local col7 ref" href="#37look" title='look' data-ref="37look">look</a>));</td></tr>
<tr><th id="148">148</th><td>  <a class="local col7 ref" href="#37look" title='look' data-ref="37look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::m" title='(anonymous struct)::m' data-use='w' data-ref="(anonymous)::m">m</a>=<a class="local col6 ref" href="#36info" title='info' data-ref="36info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::order" title='(anonymous struct)::order' data-ref="(anonymous)::order">order</a>;</td></tr>
<tr><th id="149">149</th><td>  <a class="local col7 ref" href="#37look" title='look' data-ref="37look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::ln" title='(anonymous struct)::ln' data-use='w' data-ref="(anonymous)::ln">ln</a>=<a class="local col6 ref" href="#36info" title='info' data-ref="36info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::barkmap" title='(anonymous struct)::barkmap' data-ref="(anonymous)::barkmap">barkmap</a>;</td></tr>
<tr><th id="150">150</th><td>  <a class="local col7 ref" href="#37look" title='look' data-ref="37look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::vi" title='(anonymous struct)::vi' data-use='w' data-ref="(anonymous)::vi">vi</a>=<a class="local col6 ref" href="#36info" title='info' data-ref="36info">info</a>;</td></tr>
<tr><th id="151">151</th><td></td></tr>
<tr><th id="152">152</th><td>  <a class="local col7 ref" href="#37look" title='look' data-ref="37look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='w' data-ref="(anonymous)::linearmap">linearmap</a>=<a class="macro" href="../ogg/os_types.h.html#39" title="_decoder_calloc" data-ref="_M/_ogg_calloc">_ogg_calloc</a>(<var>2</var>,<b>sizeof</b>(*<a class="local col7 ref" href="#37look" title='look' data-ref="37look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>));</td></tr>
<tr><th id="153">153</th><td></td></tr>
<tr><th id="154">154</th><td>  <b>return</b> <a class="local col7 ref" href="#37look" title='look' data-ref="37look">look</a>;</td></tr>
<tr><th id="155">155</th><td>}</td></tr>
<tr><th id="156">156</th><td></td></tr>
<tr><th id="157">157</th><td><em>static</em> <em>void</em> *<dfn class="tu decl def" id="floor0_inverse1" title='floor0_inverse1' data-type='void * floor0_inverse1(vorbis_block * vb, vorbis_look_floor * i)' data-ref="floor0_inverse1">floor0_inverse1</dfn>(<a class="typedef" href="../vorbis/codec.h.html#vorbis_block" title='vorbis_block' data-type='struct vorbis_block' data-ref="vorbis_block">vorbis_block</a> *<dfn class="local col8 decl" id="38vb" title='vb' data-type='vorbis_block *' data-ref="38vb">vb</dfn>,<a class="typedef" href="codec_internal.h.html#vorbis_look_floor" title='vorbis_look_floor' data-type='void' data-ref="vorbis_look_floor">vorbis_look_floor</a> *<dfn class="local col9 decl" id="39i" title='i' data-type='vorbis_look_floor *' data-ref="39i">i</dfn>){</td></tr>
<tr><th id="158">158</th><td>  <a class="typedef" href="#vorbis_look_floor0" title='vorbis_look_floor0' data-type='struct vorbis_look_floor0' data-ref="vorbis_look_floor0">vorbis_look_floor0</a> *<dfn class="local col0 decl" id="40look" title='look' data-type='vorbis_look_floor0 *' data-ref="40look">look</dfn>=(<a class="typedef" href="#vorbis_look_floor0" title='vorbis_look_floor0' data-type='struct vorbis_look_floor0' data-ref="vorbis_look_floor0">vorbis_look_floor0</a> *)<a class="local col9 ref" href="#39i" title='i' data-ref="39i">i</a>;</td></tr>
<tr><th id="159">159</th><td>  <a class="typedef" href="backends.h.html#vorbis_info_floor0" title='vorbis_info_floor0' data-type='struct vorbis_info_floor0' data-ref="vorbis_info_floor0">vorbis_info_floor0</a> *<dfn class="local col1 decl" id="41info" title='info' data-type='vorbis_info_floor0 *' data-ref="41info">info</dfn>=<a class="local col0 ref" href="#40look" title='look' data-ref="40look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::vi" title='(anonymous struct)::vi' data-use='r' data-ref="(anonymous)::vi">vi</a>;</td></tr>
<tr><th id="160">160</th><td>  <em>int</em> <dfn class="local col2 decl" id="42j" title='j' data-type='int' data-ref="42j">j</dfn>,<dfn class="local col3 decl" id="43k" title='k' data-type='int' data-ref="43k">k</dfn>;</td></tr>
<tr><th id="161">161</th><td></td></tr>
<tr><th id="162">162</th><td>  <em>int</em> <dfn class="local col4 decl" id="44ampraw" title='ampraw' data-type='int' data-ref="44ampraw">ampraw</dfn>=<a class="ref" href="../ogg/ogg.h.html#oggpack_read" title='oggpack_read' data-ref="oggpack_read">oggpack_read</a>(&amp;<a class="local col8 ref" href="#38vb" title='vb' data-ref="38vb">vb</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_block::opb" title='vorbis_block::opb' data-ref="vorbis_block::opb">opb</a>,<a class="local col1 ref" href="#41info" title='info' data-ref="41info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::ampbits" title='(anonymous struct)::ampbits' data-ref="(anonymous)::ampbits">ampbits</a>);</td></tr>
<tr><th id="163">163</th><td>  <b>if</b>(<a class="local col4 ref" href="#44ampraw" title='ampraw' data-ref="44ampraw">ampraw</a>&gt;<var>0</var>){ <i>/* also handles the -1 out of data case */</i></td></tr>
<tr><th id="164">164</th><td>    <em>long</em> <dfn class="local col5 decl" id="45maxval" title='maxval' data-type='long' data-ref="45maxval">maxval</dfn>=(<var>1</var>&lt;&lt;<a class="local col1 ref" href="#41info" title='info' data-ref="41info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::ampbits" title='(anonymous struct)::ampbits' data-ref="(anonymous)::ampbits">ampbits</a>)-<var>1</var>;</td></tr>
<tr><th id="165">165</th><td>    <em>float</em> <dfn class="local col6 decl" id="46amp" title='amp' data-type='float' data-ref="46amp">amp</dfn>=(<em>float</em>)<a class="local col4 ref" href="#44ampraw" title='ampraw' data-ref="44ampraw">ampraw</a>/<a class="local col5 ref" href="#45maxval" title='maxval' data-ref="45maxval">maxval</a>*<a class="local col1 ref" href="#41info" title='info' data-ref="41info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::ampdB" title='(anonymous struct)::ampdB' data-ref="(anonymous)::ampdB">ampdB</a>;</td></tr>
<tr><th id="166">166</th><td>    <em>int</em> <dfn class="local col7 decl" id="47booknum" title='booknum' data-type='int' data-ref="47booknum">booknum</dfn>=<a class="ref" href="../ogg/ogg.h.html#oggpack_read" title='oggpack_read' data-ref="oggpack_read">oggpack_read</a>(&amp;<a class="local col8 ref" href="#38vb" title='vb' data-ref="38vb">vb</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_block::opb" title='vorbis_block::opb' data-ref="vorbis_block::opb">opb</a>,<a class="ref" href="codebook.h.html#_ilog" title='_ilog' data-ref="_ilog">_ilog</a>(<a class="local col1 ref" href="#41info" title='info' data-ref="41info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::numbooks" title='(anonymous struct)::numbooks' data-ref="(anonymous)::numbooks">numbooks</a>));</td></tr>
<tr><th id="167">167</th><td>    </td></tr>
<tr><th id="168">168</th><td>    <b>if</b>(<a class="local col7 ref" href="#47booknum" title='booknum' data-ref="47booknum">booknum</a>!=-<var>1</var> &amp;&amp; <a class="local col7 ref" href="#47booknum" title='booknum' data-ref="47booknum">booknum</a>&lt;<a class="local col1 ref" href="#41info" title='info' data-ref="41info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::numbooks" title='(anonymous struct)::numbooks' data-ref="(anonymous)::numbooks">numbooks</a>){ <i>/* be paranoid */</i></td></tr>
<tr><th id="169">169</th><td>      <a class="typedef" href="codec_internal.h.html#codec_setup_info" title='codec_setup_info' data-type='struct codec_setup_info' data-ref="codec_setup_info">codec_setup_info</a>  *<dfn class="local col8 decl" id="48ci" title='ci' data-type='codec_setup_info *' data-ref="48ci">ci</dfn>=<a class="local col8 ref" href="#38vb" title='vb' data-ref="38vb">vb</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_block::vd" title='vorbis_block::vd' data-ref="vorbis_block::vd">vd</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_dsp_state::vi" title='vorbis_dsp_state::vi' data-ref="vorbis_dsp_state::vi">vi</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_info::codec_setup" title='vorbis_info::codec_setup' data-ref="vorbis_info::codec_setup">codec_setup</a>;</td></tr>
<tr><th id="170">170</th><td>      <a class="typedef" href="codebook.h.html#codebook" title='codebook' data-type='struct codebook' data-ref="codebook">codebook</a> *<dfn class="local col9 decl" id="49b" title='b' data-type='codebook *' data-ref="49b">b</dfn>=<a class="local col8 ref" href="#48ci" title='ci' data-ref="48ci">ci</a>-&gt;<a class="ref" href="codec_internal.h.html#codec_setup_info::fullbooks" title='codec_setup_info::fullbooks' data-ref="codec_setup_info::fullbooks">fullbooks</a>+<a class="local col1 ref" href="#41info" title='info' data-ref="41info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::books" title='(anonymous struct)::books' data-ref="(anonymous)::books">books</a>[<a class="local col7 ref" href="#47booknum" title='booknum' data-ref="47booknum">booknum</a>];</td></tr>
<tr><th id="171">171</th><td>      <em>float</em> <dfn class="local col0 decl" id="50last" title='last' data-type='float' data-ref="50last">last</dfn>=<var>0.f</var>;</td></tr>
<tr><th id="172">172</th><td></td></tr>
<tr><th id="173">173</th><td>      <i>/* the additional b-&gt;dim is a guard against any possible stack</i></td></tr>
<tr><th id="174">174</th><td><i>         smash; b-&gt;dim is provably more than we can overflow the</i></td></tr>
<tr><th id="175">175</th><td><i>         vector */</i></td></tr>
<tr><th id="176">176</th><td>      <em>float</em> *<dfn class="local col1 decl" id="51lsp" title='lsp' data-type='float *' data-ref="51lsp">lsp</dfn>=<a class="ref" href="misc.h.html#_vorbis_block_alloc" title='_vorbis_block_alloc' data-ref="_vorbis_block_alloc">_vorbis_block_alloc</a>(<a class="local col8 ref" href="#38vb" title='vb' data-ref="38vb">vb</a>,<b>sizeof</b>(*<a class="local col1 ref" href="#51lsp" title='lsp' data-ref="51lsp">lsp</a>)*(<a class="local col0 ref" href="#40look" title='look' data-ref="40look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::m" title='(anonymous struct)::m' data-use='r' data-ref="(anonymous)::m">m</a>+<a class="local col9 ref" href="#49b" title='b' data-ref="49b">b</a>-&gt;<a class="ref" href="codebook.h.html#codebook::dim" title='codebook::dim' data-ref="codebook::dim">dim</a>+<var>1</var>));</td></tr>
<tr><th id="177">177</th><td>            </td></tr>
<tr><th id="178">178</th><td>      <b>for</b>(<a class="local col2 ref" href="#42j" title='j' data-ref="42j">j</a>=<var>0</var>;<a class="local col2 ref" href="#42j" title='j' data-ref="42j">j</a>&lt;<a class="local col0 ref" href="#40look" title='look' data-ref="40look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::m" title='(anonymous struct)::m' data-use='r' data-ref="(anonymous)::m">m</a>;<a class="local col2 ref" href="#42j" title='j' data-ref="42j">j</a>+=<a class="local col9 ref" href="#49b" title='b' data-ref="49b">b</a>-&gt;<a class="ref" href="codebook.h.html#codebook::dim" title='codebook::dim' data-ref="codebook::dim">dim</a>)</td></tr>
<tr><th id="179">179</th><td>	<b>if</b>(<a class="ref" href="codebook.h.html#vorbis_book_decodev_set" title='vorbis_book_decodev_set' data-ref="vorbis_book_decodev_set">vorbis_book_decodev_set</a>(<a class="local col9 ref" href="#49b" title='b' data-ref="49b">b</a>,<a class="local col1 ref" href="#51lsp" title='lsp' data-ref="51lsp">lsp</a>+<a class="local col2 ref" href="#42j" title='j' data-ref="42j">j</a>,&amp;<a class="local col8 ref" href="#38vb" title='vb' data-ref="38vb">vb</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_block::opb" title='vorbis_block::opb' data-ref="vorbis_block::opb">opb</a>,<a class="local col9 ref" href="#49b" title='b' data-ref="49b">b</a>-&gt;<a class="ref" href="codebook.h.html#codebook::dim" title='codebook::dim' data-ref="codebook::dim">dim</a>)==-<var>1</var>)<b>goto</b> <a class="lbl" href="#52eop" data-ref="52eop">eop</a>;</td></tr>
<tr><th id="180">180</th><td>      <b>for</b>(<a class="local col2 ref" href="#42j" title='j' data-ref="42j">j</a>=<var>0</var>;<a class="local col2 ref" href="#42j" title='j' data-ref="42j">j</a>&lt;<a class="local col0 ref" href="#40look" title='look' data-ref="40look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::m" title='(anonymous struct)::m' data-use='r' data-ref="(anonymous)::m">m</a>;){</td></tr>
<tr><th id="181">181</th><td>	<b>for</b>(<a class="local col3 ref" href="#43k" title='k' data-ref="43k">k</a>=<var>0</var>;<a class="local col3 ref" href="#43k" title='k' data-ref="43k">k</a>&lt;<a class="local col9 ref" href="#49b" title='b' data-ref="49b">b</a>-&gt;<a class="ref" href="codebook.h.html#codebook::dim" title='codebook::dim' data-ref="codebook::dim">dim</a>;<a class="local col3 ref" href="#43k" title='k' data-ref="43k">k</a>++,<a class="local col2 ref" href="#42j" title='j' data-ref="42j">j</a>++)<a class="local col1 ref" href="#51lsp" title='lsp' data-ref="51lsp">lsp</a>[<a class="local col2 ref" href="#42j" title='j' data-ref="42j">j</a>]+=<a class="local col0 ref" href="#50last" title='last' data-ref="50last">last</a>;</td></tr>
<tr><th id="182">182</th><td>	<a class="local col0 ref" href="#50last" title='last' data-ref="50last">last</a>=<a class="local col1 ref" href="#51lsp" title='lsp' data-ref="51lsp">lsp</a>[<a class="local col2 ref" href="#42j" title='j' data-ref="42j">j</a>-<var>1</var>];</td></tr>
<tr><th id="183">183</th><td>      }</td></tr>
<tr><th id="184">184</th><td>      </td></tr>
<tr><th id="185">185</th><td>      <a class="local col1 ref" href="#51lsp" title='lsp' data-ref="51lsp">lsp</a>[<a class="local col0 ref" href="#40look" title='look' data-ref="40look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::m" title='(anonymous struct)::m' data-use='r' data-ref="(anonymous)::m">m</a>]=<a class="local col6 ref" href="#46amp" title='amp' data-ref="46amp">amp</a>;</td></tr>
<tr><th id="186">186</th><td>      <b>return</b>(<a class="local col1 ref" href="#51lsp" title='lsp' data-ref="51lsp">lsp</a>);</td></tr>
<tr><th id="187">187</th><td>    }</td></tr>
<tr><th id="188">188</th><td>  }</td></tr>
<tr><th id="189">189</th><td> <dfn class="lbl" id="52eop" data-ref="52eop">eop</dfn>:</td></tr>
<tr><th id="190">190</th><td>  <b>return</b>(<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="191">191</th><td>}</td></tr>
<tr><th id="192">192</th><td></td></tr>
<tr><th id="193">193</th><td><em>static</em> <em>int</em> <dfn class="tu decl def" id="floor0_inverse2" title='floor0_inverse2' data-type='int floor0_inverse2(vorbis_block * vb, vorbis_look_floor * i, void * memo, float * out)' data-ref="floor0_inverse2">floor0_inverse2</dfn>(<a class="typedef" href="../vorbis/codec.h.html#vorbis_block" title='vorbis_block' data-type='struct vorbis_block' data-ref="vorbis_block">vorbis_block</a> *<dfn class="local col3 decl" id="53vb" title='vb' data-type='vorbis_block *' data-ref="53vb">vb</dfn>,<a class="typedef" href="codec_internal.h.html#vorbis_look_floor" title='vorbis_look_floor' data-type='void' data-ref="vorbis_look_floor">vorbis_look_floor</a> *<dfn class="local col4 decl" id="54i" title='i' data-type='vorbis_look_floor *' data-ref="54i">i</dfn>,</td></tr>
<tr><th id="194">194</th><td>			   <em>void</em> *<dfn class="local col5 decl" id="55memo" title='memo' data-type='void *' data-ref="55memo">memo</dfn>,<em>float</em> *<dfn class="local col6 decl" id="56out" title='out' data-type='float *' data-ref="56out">out</dfn>){</td></tr>
<tr><th id="195">195</th><td>  <a class="typedef" href="#vorbis_look_floor0" title='vorbis_look_floor0' data-type='struct vorbis_look_floor0' data-ref="vorbis_look_floor0">vorbis_look_floor0</a> *<dfn class="local col7 decl" id="57look" title='look' data-type='vorbis_look_floor0 *' data-ref="57look">look</dfn>=(<a class="typedef" href="#vorbis_look_floor0" title='vorbis_look_floor0' data-type='struct vorbis_look_floor0' data-ref="vorbis_look_floor0">vorbis_look_floor0</a> *)<a class="local col4 ref" href="#54i" title='i' data-ref="54i">i</a>;</td></tr>
<tr><th id="196">196</th><td>  <a class="typedef" href="backends.h.html#vorbis_info_floor0" title='vorbis_info_floor0' data-type='struct vorbis_info_floor0' data-ref="vorbis_info_floor0">vorbis_info_floor0</a> *<dfn class="local col8 decl" id="58info" title='info' data-type='vorbis_info_floor0 *' data-ref="58info">info</dfn>=<a class="local col7 ref" href="#57look" title='look' data-ref="57look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::vi" title='(anonymous struct)::vi' data-use='r' data-ref="(anonymous)::vi">vi</a>;</td></tr>
<tr><th id="197">197</th><td>  </td></tr>
<tr><th id="198">198</th><td>  <a class="tu ref" href="#floor0_map_lazy_init" title='floor0_map_lazy_init' data-use='c' data-ref="floor0_map_lazy_init">floor0_map_lazy_init</a>(<a class="local col3 ref" href="#53vb" title='vb' data-ref="53vb">vb</a>,<a class="local col8 ref" href="#58info" title='info' data-ref="58info">info</a>,<a class="local col7 ref" href="#57look" title='look' data-ref="57look">look</a>);</td></tr>
<tr><th id="199">199</th><td></td></tr>
<tr><th id="200">200</th><td>  <b>if</b>(<a class="local col5 ref" href="#55memo" title='memo' data-ref="55memo">memo</a>){</td></tr>
<tr><th id="201">201</th><td>    <em>float</em> *<dfn class="local col9 decl" id="59lsp" title='lsp' data-type='float *' data-ref="59lsp">lsp</dfn>=(<em>float</em> *)<a class="local col5 ref" href="#55memo" title='memo' data-ref="55memo">memo</a>;</td></tr>
<tr><th id="202">202</th><td>    <em>float</em> <dfn class="local col0 decl" id="60amp" title='amp' data-type='float' data-ref="60amp">amp</dfn>=<a class="local col9 ref" href="#59lsp" title='lsp' data-ref="59lsp">lsp</a>[<a class="local col7 ref" href="#57look" title='look' data-ref="57look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::m" title='(anonymous struct)::m' data-use='r' data-ref="(anonymous)::m">m</a>];</td></tr>
<tr><th id="203">203</th><td></td></tr>
<tr><th id="204">204</th><td>    <i>/* take the coefficients back to a spectral envelope curve */</i></td></tr>
<tr><th id="205">205</th><td>    <a class="ref" href="lsp.h.html#vorbis_lsp_to_curve" title='vorbis_lsp_to_curve' data-ref="vorbis_lsp_to_curve">vorbis_lsp_to_curve</a>(<a class="local col6 ref" href="#56out" title='out' data-ref="56out">out</a>,</td></tr>
<tr><th id="206">206</th><td>			<a class="local col7 ref" href="#57look" title='look' data-ref="57look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::linearmap" title='(anonymous struct)::linearmap' data-use='r' data-ref="(anonymous)::linearmap">linearmap</a>[<a class="local col3 ref" href="#53vb" title='vb' data-ref="53vb">vb</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_block::W" title='vorbis_block::W' data-ref="vorbis_block::W">W</a>],</td></tr>
<tr><th id="207">207</th><td>			<a class="local col7 ref" href="#57look" title='look' data-ref="57look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::n" title='(anonymous struct)::n' data-use='r' data-ref="(anonymous)::n">n</a>[<a class="local col3 ref" href="#53vb" title='vb' data-ref="53vb">vb</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_block::W" title='vorbis_block::W' data-ref="vorbis_block::W">W</a>],</td></tr>
<tr><th id="208">208</th><td>			<a class="local col7 ref" href="#57look" title='look' data-ref="57look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::ln" title='(anonymous struct)::ln' data-use='r' data-ref="(anonymous)::ln">ln</a>,</td></tr>
<tr><th id="209">209</th><td>			<a class="local col9 ref" href="#59lsp" title='lsp' data-ref="59lsp">lsp</a>,<a class="local col7 ref" href="#57look" title='look' data-ref="57look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::m" title='(anonymous struct)::m' data-use='r' data-ref="(anonymous)::m">m</a>,<a class="local col0 ref" href="#60amp" title='amp' data-ref="60amp">amp</a>,(<em>float</em>)<a class="local col8 ref" href="#58info" title='info' data-ref="58info">info</a>-&gt;<a class="ref" href="backends.h.html#(anonymous)::ampdB" title='(anonymous struct)::ampdB' data-ref="(anonymous)::ampdB">ampdB</a>);</td></tr>
<tr><th id="210">210</th><td>    <b>return</b>(<var>1</var>);</td></tr>
<tr><th id="211">211</th><td>  }</td></tr>
<tr><th id="212">212</th><td>  <a class="ref" href="../../../../include/string.h.html#memset" title='memset' data-ref="memset">memset</a>(<a class="local col6 ref" href="#56out" title='out' data-ref="56out">out</a>,<var>0</var>,<b>sizeof</b>(*<a class="local col6 ref" href="#56out" title='out' data-ref="56out">out</a>)*<a class="local col7 ref" href="#57look" title='look' data-ref="57look">look</a>-&gt;<a class="tu ref" href="#(anonymous)::n" title='(anonymous struct)::n' data-use='r' data-ref="(anonymous)::n">n</a>[<a class="local col3 ref" href="#53vb" title='vb' data-ref="53vb">vb</a>-&gt;<a class="ref" href="../vorbis/codec.h.html#vorbis_block::W" title='vorbis_block::W' data-ref="vorbis_block::W">W</a>]);</td></tr>
<tr><th id="213">213</th><td>  <b>return</b>(<var>0</var>);</td></tr>
<tr><th id="214">214</th><td>}</td></tr>
<tr><th id="215">215</th><td></td></tr>
<tr><th id="216">216</th><td><i>/* export hooks */</i></td></tr>
<tr><th id="217">217</th><td><a class="typedef" href="backends.h.html#vorbis_func_floor" title='vorbis_func_floor' data-type='struct vorbis_func_floor' data-ref="vorbis_func_floor">vorbis_func_floor</a> <dfn class="decl def" id="floor0_exportbundle" title='floor0_exportbundle' data-ref="floor0_exportbundle">floor0_exportbundle</dfn>={</td></tr>
<tr><th id="218">218</th><td>  <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,&amp;<a class="tu ref" href="#floor0_unpack" title='floor0_unpack' data-use='a' data-ref="floor0_unpack">floor0_unpack</a>,&amp;<a class="tu ref" href="#floor0_look" title='floor0_look' data-use='a' data-ref="floor0_look">floor0_look</a>,&amp;<a class="tu ref" href="#floor0_free_info" title='floor0_free_info' data-use='a' data-ref="floor0_free_info">floor0_free_info</a>,</td></tr>
<tr><th id="219">219</th><td>  &amp;<a class="tu ref" href="#floor0_free_look" title='floor0_free_look' data-use='a' data-ref="floor0_free_look">floor0_free_look</a>,&amp;<a class="tu ref" href="#floor0_inverse1" title='floor0_inverse1' data-use='a' data-ref="floor0_inverse1">floor0_inverse1</a>,&amp;<a class="tu ref" href="#floor0_inverse2" title='floor0_inverse2' data-use='a' data-ref="floor0_inverse2">floor0_inverse2</a></td></tr>
<tr><th id="220">220</th><td>};</td></tr>
<tr><th id="221">221</th><td></td></tr>
<tr><th id="222">222</th><td></td></tr>
<tr><th id="223">223</th><td></td></tr>
<tr><th id="224">224</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2017-Aug-29</em> from project codebrowser revision <em>a9c49da</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
